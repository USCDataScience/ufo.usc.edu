<!DOCTYPE html>
<html lang="en">
<style>

svg {
  background: #eee;
}

div.tooltip { 
    position: absolute;     
    text-align: center;     
    /*width: 60px;          
    height: 28px; */        
    padding: 2px;       
    font: 18px sans-serif;    
    background: orange; 
    border: 0px;    
    border-radius: 8px;     
    pointer-events: none;     
}
.sphere {
  fill: #fff;
}
.overlay {
  fill: none;
  pointer-events: none;
}

.land {
  fill: none;
}

.boundary {
  fill: none;
  stroke: #fff;
  stroke-linejoin: round;
  stroke-linecap: round;
  vector-effect: non-scaling-stroke;
}



</style>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Team 09 Insights</title>
    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Scrolling Nav CSS -->
    <link href="../../css/scrolling-nav.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/styles.css" rel="stylesheet">
	
	
	<!-- css for viz1 -->
    <link href="../../css/Team09/styles.css" rel="stylesheet">

</head>

<!-- The #page-top ID is part of the scrolling feature - the data-spy and data-target are part of the built-in Bootstrap scrollspy function -->

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

    <!-- Navigation -->
    <div id="nav-main">
    <nav class="navbar mav-main navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                
            </div>

            <div class="collapse navbar-collapse navbar-ex1-collapse">  
              <nav id="nav-wrap">
                <ul class="nav navbar-nav navbar-custom">
                    <li class="current"><a class="page-scroll" href="../index.html#page-top" style="color:white">Home</a></li>
                    <li class="hidden"><a class="page-scroll" href="#page-top" style="color:white"></a></li>
                    <li><a class="page-scroll" href="../index.html#about" style="color:#ffffff">About</a></li>
                    <li><a class="page-scroll" href="../index.html#features" style="color:#ffffff">Insights</a></li>
                    <li><a class="page-scroll" style="color:#ffffff" href="../index.html#learn-more">Partners</a></li>
                </ul>
              </nav>

                <a href="http://usc.edu" class="pull-right">
                  <img src="../../images/usc-primary-logotype.svg" width="176px" height="38px">
                </a>
            </div>
        </div>
    </nav>
  </div>


    <hr class="featurette-divider">
    <div>
        <div class="container">
            <footer>
                <p align=center>©USC Data Science Group 2016, All Rights Reserved</p>
            </footer>
        </div>
    </div>
	
	
	<div class="container">
	
		<div class="row">
			<center><h1>Sightings across the World</h1></center>
		</div>
	
		<div class="row">
			<div class="col-md-2">
				<h4><b>Description</b></h4>
				<p><span style="color:red;"> *Note: Takes a while to load! Please be patient</span><br/>The map is zoomable (and drag-able) and shows the date and location of the sighting on hovering</p>
			</div>
			<div class="col-md-10" id="chart1">
				
			</div>
		
		<footer class="page-footer font-small blue pt-4 mt-4">

			<!--Footer Links-->
			<div class="container-fluid text-right text-md-right">
				<div class="row">

				   

					<!--Second column-->
					<div class="col-md-6.offset-md-6">
						<h5 class="text-uppercase">Credits</h5>
						<ul class="list-unstyled">
							<li>
								<a href="https://www.linkedin.com/in/arpitbh/" target="_blank">Arpit Bhardwaj</a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/renuka-raju/" target="_blank">Renuka Raju</a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/sanchit-lodha/" target="_blank">Sanchit Lodha</a>
							</li>
							
						</ul>
					</div>
					<!--/.Second column-->
				</div>
			</div>
			<!--/.Footer Links--><p align=center>©USC Data Science Group 2016, All Rights Reserved</p>

    
		</footer>
	
		</div>
	
	</div>
<!-- jQuery -->
    <script src="../../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../../js/bootstrap.min.js"></script>

    <!-- Scrolling Nav JavaScript -->
    <script src="../../js/jquery.easing.min.js"></script>
    <script src="../../js/scrolling-nav.js"></script>
    <script src="../../js/cardpanel.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>
	<script>

var width = 1000,
    height = 600,
    scale = (width - 1) / 2 / Math.PI;

var projection = d3.geo.mercator().scale(220).translate([width/2 , height/2 + 120 ]);

var zoom = d3.behavior.zoom()
    .on("zoom",function() {
        g.attr("transform","translate("+ 
            d3.event.translate.join(",")+")scale("+d3.event.scale+")");
        g.selectAll("circle")
            .attr("d", path.projection(projection));
        g.selectAll("path")  
            .attr("d", path.projection(projection)); 

  });

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#chart1").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g");

var g = svg.append("g");

div = d3.select("body")
.append("div") 
.attr("class", "tooltip");

svg.append("rect")
    .attr("class", "overlay")
    .attr("width", width)
    .attr("height", height);//.style("fill","#9bbff4");

svg
    .call(zoom)
    .call(zoom.event);

d3.json("data/visualization9/world-110m.json", function(error, world) {
  d3.json("data/visualization9/map_data.json", function(error, data) {
    g.selectAll("circle")
       .data(data)
       .enter()
       .append("circle")
       .attr("cx", function(d) {
               return projection([d.log, d.lat])[0];
       })
       .attr("cy", function(d) {
               return projection([d.log, d.lat])[1];
       })
       .attr("r", 0.5)
       .attr("pointer-events","all")
       .style("fill", "red")
       .on("mouseover", function(d) {   
            div.transition()    
                .duration(200)    
                .style("opacity", .9);    
            div .html(d.place+"<br>"+d.sighted_at)  
                .style("left", (d3.event.pageX) + "px")   
                .style("top", (d3.event.pageY - 28) + "px");  
            })          
        .on("mouseout", function(d) {   
            div.transition()    
                .duration(500)    
                .style("opacity", 0); 
        });
       

});
  if (error) throw error;

  g.append("path")
      .datum({type: "Sphere"})
      .attr("class", "sphere")
      .attr("d", path).style("fill","#9bbff4");

  g.append("path")
      .datum(topojson.merge(world, world.objects.countries.geometries))
      .attr("class", "land")
      .attr("d", path).style("fill","#444444");

  g.append("path")
      .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }))
      .attr("class", "boundary")
      .attr("d", path).style("fill","#444444");
});

function zoomed() {
  projection
      .translate(zoom.translate())
      .scale(zoom.scale());

  g.selectAll("path")
      .attr("d", path);
}

d3.select(self.frameElement).style("height", height + "px");

</script>
</body>
</html>